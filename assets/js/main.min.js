Simulator={config:{cycle:100,maxGrowth:100,needsRangeUnder:10,needsRangeOver:10,growthRate:.3,debug:false},start:function(){Simulator.sliders={sun:$("#palancas #sol").slider().data("slider"),water:$("#palancas #agua").slider().data("slider"),food:$("#palancas #nutrientes").slider().data("slider"),space:$("#palancas #espacio").slider().data("slider")};if(!Simulator.config.debug){console={log:function(e){}}}Simulator.addLifecycle(function(){Simulator.Plant.update({water:-(Simulator.sliders.water.getValue()-100),food:-(Simulator.sliders.food.getValue()-100),sun:-(Simulator.sliders.sun.getValue()-100),space:-(Simulator.sliders.space.getValue()-100)})},true);Simulator.addLifecycle(function(){var e=Simulator.Plant.growth*4+"px";$("#plant").css({fontSize:e});console.log("Plant size: "+e)});Simulator.startLife()},startLife:function(){Simulator.stopLife();Simulator.executeCycle();Simulator.lifeInterval=setInterval(function(){Simulator.executeCycle()},Simulator.config.cycle)},executeCycle:function(){var a=Simulator.lifecycle.length;if(a<1){Simulator.stopLife();console.log("Life stopped, no lifecycle functions!");return}for(var e=0;e<a;e++){Simulator.lifecycle[e]()}},stopLife:function(){clearInterval(Simulator.lifeInterval)},addLifecycle:function(e,a){Simulator.lifecycle.push(e);if(Simulator.lifeInterval===null&&a===true){Simulator.startLife()}},lifeInterval:null,lifecycle:[],Plant:{growth:0,sickness:0,state:"alive",problems:[],grow:function(e){if(Simulator.Plant.growth>=Simulator.config.maxGrowth){console.log("Maximum already");return}Simulator.Plant.growth+=e},needs:function(){return{water:{min:Math.max(0,Simulator.Plant.growth-Simulator.config.needsRangeUnder),max:Math.min(100,Simulator.Plant.growth+Simulator.config.needsRangeOver)},sun:{min:Math.max(0,Simulator.Plant.growth-Simulator.config.needsRangeUnder),max:Math.min(100,Simulator.Plant.growth+Simulator.config.needsRangeOver)},space:{min:Math.max(0,Simulator.Plant.growth-Simulator.config.needsRangeUnder),max:Math.min(100,Simulator.Plant.growth+Simulator.config.needsRangeOver)},food:{min:Math.max(0,Simulator.Plant.growth-Simulator.config.needsRangeUnder),max:Math.min(100,Simulator.Plant.growth+Simulator.config.needsRangeOver)}}},update:function(e){$("#palancas i").css({color:"#fff"});var a=true;if(Simulator.Plant.growth>=e.space){$("#space-img").css({color:"red"});a=false}needs=Simulator.Plant.needs();console.log("Plant needs: ",needs);if(e.water<needs.water.min||e.water>needs.water.max){$("#water-img").css({color:"red"});a=false}if(e.sun<needs.sun.min||e.sun>needs.sun.max){$("#sun-img").css({color:"red"});a=false}if(e.food<needs.food.min||e.food>needs.food.max){$("#food-img").css({color:"red"});a=false}if(a&&e.food>0&&e.sun>0&&e.water>0){var t=Simulator.config.growthRate*((e.water+e.sun+e.food)/3-needs.food.min)/needs.food.max;console.log("Growth = "+Simulator.Plant.growth+". Growing "+t);Simulator.Plant.grow(t)}else if(a){console.log("Something is 0")}else{console.log("Not OK!")}},diff:function(e,a){return Math.abs(Math.abs(e)-Math.abs(a))},setProblem:function(e,a){Plant.problems[e]=a}}};