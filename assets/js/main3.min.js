Simulator={config:{debug:false,speed:1},palancas:[{name:"Liderazgo",opciones:["Clásico","Transformacional"]},{name:"Formación",opciones:['La justa/sólo para la "tarea"',"Se potencia el desarrollo profesional"]},{name:"Transparencia en las cuentas",opciones:["No existe","Total. Se comparten sistemáticamente."]},{name:"Participación en los beneficios",opciones:["No","Si"]},{name:"Incentivos individuales",opciones:["Basados en niveles de productividad/calidad","No existen"]},{name:"Autonomía en el trabajo",opciones:["Limitada a la ejecución de la tarea","Amplia (Calidad, objetivos...)"]},{name:"Participación en la estrategia",opciones:["Inexistente","La mayor posible"]}],comments:[["La organización no confía en nosotros/as","No somos parte del proyecto",'Somos un "recurso" al servicio de un proyecto ajeno a nosotros',"En esta organización hago el esfuerzo justo, y si tenemos la suerte de trabajar menos por averías/ineficiencias... mejor!"],["Parece que confian en nosotros/as","Por el momento no somos parte del proyecto, pero en un futuro...",'Parece que somos un "activo" clave',"Están confiando en nosotros y parece que reconocen nuestro potencial para aportar y hacer sostenible el proyecto.",'Es un engaño, pues se trata de una iniciativa disfrazada de buenas palabras para darnos otra "vuelta de tuerca" más!'],["La organización confía en nosotros/as","Somos parte del proyecto",'Somos un "activo" clave para el éxito del proyecto',"Nos esforzamos continuamente para mejorar la calidad del servicio que ofrecemos a nuestros clientes","Realizamos esfuerzos extra en el trabajo para que el proyecto tenga éxito."]],gerente:[{text:"¡Viene a controlarnos!",style:"bg-danger"},{text:"¡Viene a controlarnos!",style:"bg-danger"},{text:"Viene a escucharnos; Quiere estar cerca de nosotros/as",style:"bg-success"}],result:[{text:"Mis 8 horitas y me voy cuanto antes y a ser posible con el menor trabajo posible.",style:"bg-warning"},{text:"Mis 8 horitas y me voy cuanto antes y a ser posible con el menor trabajo posible.",style:"bg-warning"},{text:"El proyecto de esta organización me ilusiona y mi labor para su materialización es importante.",style:"bg-success"}],tasks:[{text:"Configura, por favor, las siguientes palancas siguiendo una lógica clásica de poco compromiso en las personas.",target:[0,0,0,0,0,0,0]},{text:"La gerencia decide probar una nueva iniciativa, modifica por favor la configuración de Autonomía",target:[0,0,0,0,0,1,0]},{text:"Por favor, vuelve a configurar nuevamente el sistema de prácticas, pero en este caso sigue un planteamiento de compromiso total en las personas.",target:[1,1,1,1,1,1,1]}],target:false,editable:false,currentResult:-1,animationPhase:0,start:function(){Simulator.setup();Simulator.disableSettings();$("#help").click(function(e){e.preventDefault();$("#help-modal").modal()});$("#spinner").css({"-webkit-animation-duration":10*Simulator.config.speed+"s"});Simulator.$tarea=$("#instruction-modal");if(!Simulator.config.debug){console={log:function(e){}}}Simulator.newTask(0);var e;$("#palancas button").change(function(){e=Simulator.getStatus();if(e.status){console.log("start: Start simulation phase "+Simulator.animationPhase);Simulator.startAnimation(Simulator.animationPhase)}})},newTask:function(e){console.log("Starting new phase: "+e);if(e>0)Simulator.moveAnimation(0);$(".bubble").hide();$("#boss").hide();$("#result").hide();$(".messages .message").remove();Simulator.editable=true;Simulator.$tarea.find(".modal-body").html(Simulator.tasks[e].text);Simulator.$tarea.modal().on("hidden.bs.modal",function(){Simulator.enableSettings()});Simulator.target=Simulator.tasks[e].target},setup:function(){$("#palancas").html();for(var e=Simulator.palancas.length-1;e>=0;e--){var a=Math.round(Math.random()*(Simulator.palancas[e].opciones.length-1)),t='<button class="btn btn-default" data-setting="'+e+'">'+'<span class="btn-title">'+Simulator.palancas[e].name+"</span>"+'<span class="btn-value" data-index="'+a+'">'+Simulator.palancas[e].opciones[a]+"</span>"+"</button>";$("#palancas").prepend(t);if(e>0&&e%2==0)$("#palancas").prepend("<br />")}$("#palancas button").click(function(t){t.preventDefault();var a=$(this).attr("data-setting"),e=parseInt($(this).find(".btn-value").attr("data-index"))+1;if(typeof Simulator.palancas[a].opciones[e]=="undefined"){e=0}$(this).find(".btn-value").attr("data-index",e).text(Simulator.palancas[a].opciones[e]);$(this).trigger("change")})},getStatus:function(){var n=0,a=[],t=$("#palancas button"),o=Simulator.target;if(!o){n=Simulator.findPopular();o=[];for(var e=0;e<Simulator.palancas.length;e++){o.push(n)}}for(var e=0;e<t.length;e++){if(Simulator.getValue($(t[e]))-o[e]!==0){a.push(e);$(t[e]).removeClass("btn-default").removeClass("btn-success").addClass("btn-danger")}else{$(t[e]).removeClass("btn-default").removeClass("btn-danger").addClass("btn-success")}}if(a.length===0){console.log("getStatus: All settings are OK");return{status:true}}console.log("getStatus: Faulty settings: ",a);return{status:false,faulty:a}},getValue:function(e){return e.find(".btn-value").attr("data-index")},moveAnimation:function(e,t){pos={top:0,left:0};if(e==1){pos={top:"-200px",left:"-600px"}}var a=0;if(e==1)a=4e3;Simulator.highlightWrong();console.log("moveAnimation(), pos: ",pos);setTimeout(function(){$("#app").animate(pos,2e3*Simulator.config.speed,"swing",t)},a*Simulator.config.speed)},highlightWrong:function(){var t=Simulator.findPopular(),a=$("#palancas button");for(var e=0;e<a.length;e++){if(Simulator.getValue($(a[e]))-t!==0){$(a[e]).removeClass("btn-default").removeClass("btn-success").addClass("btn-danger")}else{$(a[e]).removeClass("btn-default").addClass("btn-success").removeClass("btn-danger")}}},startAnimation:function(e){console.log("startAnimation: Animation of type "+e+" triggered! Blocking all settings");Simulator.editable=false;Simulator.disableSettings();Simulator.displayCircle();Simulator.moveAnimation(1,function(){Simulator.animateSpinner();Simulator.cycleComments(e,function(){setTimeout(function(){Simulator.showResult(e)},3e3*Simulator.config.speed);setTimeout(function(){Simulator.showBoss();Simulator.animateSpinner();Simulator.animateQuestionMark()},7e3*Simulator.config.speed);setTimeout(function(){$(".messages").append('<div class="message '+Simulator.gerente[e].style+'" style="margin:10px 0; font-weight:bold;">'+Simulator.gerente[e].text+"</div>")},17e3*Simulator.config.speed);setTimeout(function(){Simulator.animationPhase++;if(Simulator.animationPhase<Simulator.tasks.length){Simulator.newTask(Simulator.animationPhase)}else{alert("Has acabado la demostración.")}},22e3*Simulator.config.speed)})})},displayCircle:function(){$(".bubble").hide();$("#boss").hide();$("#result").hide();$(".messages .message").remove();$("#circle").fadeIn()},animateSpinner:function(){console.log("animateSpinner()");$("#spinner").removeClass("animated").fadeIn();$("#spinner").prop("offsetWidth",$("#spinner").prop("offsetWidth"));setTimeout(function(){$("#spinner").addClass("animated")},10)},cycleComments:function(e,i){if(typeof Simulator.comments[e]=="undefined")return;var o=[2e3*Simulator.config.speed,5e3*Simulator.config.speed,9e3*Simulator.config.speed],a=o[o.length-1];Simulator.animateQuestionMark();for(var t=0;t<3;t++){Simulator.displayComment(e,t,o[t])}if(Simulator.comments[e].length>3){console.log("cycleComments: Phase "+e+" There are more comments, spin again and show them");setTimeout(function(){Simulator.animateQuestionMark();Simulator.animateSpinner()},a);a+=9e3*Simulator.config.speed;if(e>1){var n=3;if(Simulator.comments[e].length>4){n=Math.floor(Math.random()*(Simulator.comments[e].length-1)+3)}console.log("cycleComments: Phase "+e+", chosen randomly comment: "+n);Simulator.displayComment(e,n,a)}else{Simulator.displayComment(e,3,a)}}if(e==1){console.log("cycleComments: Phase 1, show the conclussion they get after a given time.");setTimeout(function(){Simulator.animateSpinner();Simulator.animateQuestionMark()},a);a+=9e3*Simulator.config.speed;Simulator.displayComment(e,4,a)}setTimeout(function(){i.call()},a)},displayComment:function(a,e,t){setTimeout(function(){var t=e+1;if(t>4){t=4;$("#m"+t).fadeOut(250,function(){$("#m"+t).html(Simulator.comments[a][e]).fadeIn()})}else{$("#m"+t).html(Simulator.comments[a][e]).fadeIn()}},t)},animateQuestionMark:function(){setTimeout(function(){$("#questions").fadeToggle()},100*Simulator.config.speed);setTimeout(function(){$("#questions").fadeToggle()},2500*Simulator.config.speed);setTimeout(function(){$("#questions").fadeToggle()},6500*Simulator.config.speed);setTimeout(function(){$("#questions").fadeOut()},8e3*Simulator.config.speed)},findPopular:function(){var e=[0,0,0],o=$("#palancas button");for(var t=0;t<o.length;t++){if(Simulator.getValue($(o[t]))<0){continue}e[Simulator.getValue($(o[t]))]++}var a=0;if(e[1]>e[0])a=1;if(e[2]>e[a])a=2;console.log("findPopular: Most popular column: "+a);return a},showResult:function(e){$("#spinner").fadeOut();if(typeof Simulator.result[e]==="undefined"){console.err("showResult: undefined index "+e);return}$(".messages").append('<div id="result" class="message '+Simulator.result[e].style+'">'+Simulator.result[e].text+"</div>").fadeIn()},showBoss:function(){console.log("showBoss()");$("#boss").fadeIn()},enableSettings:function(){if(!Simulator.editable)return;$("#palancas").animate({backgroundColor:"#79B6FF"},600).find("button").prop("disabled",false)},disableSettings:function(){$("#palancas").animate({backgroundColor:"#DBDBDB"},400).find("button").prop("disabled",true)}};